---
title: "Bat Foraging Calls"
author: "M. Roberts"
date: "2025-09-26"
output: html_document
---

<style>
h1.title {
   color: darkolivegreen; 
   font-family: serif;
   font-weight: bold;
   font-size: 34 px;
}
h4.author {
   color: darkslategray;
   font-family: serif;
   font-size: 22px;
}
h4.date {
   color: darkslategray;
   font-family: serif;
   font-size: 22px;
}
</style>


<div style="text-align: center;">
  <img src="84.jpg" width="40%" style="margin-right:30px; border: 4px solid darkslategray; border-radius: 8px;"/>
  <img src="acoustic_in_field.jpg" width="40%" style="border: 4px solid darkslategray; border-radius: 8px;"/>
</div>

<p style="color: darkolivegreen; font-family: serif; font-size: 20px;">
For my thesis project, I set out acoustics across Fort Campbell Military Base and collected bat calls over 8 days. My field technicians and I completed habitat assessments for each acoustic placed and recorded characteristics such as vegetation cover, mean canopy cover, basal area, snags, water presence, etc. For this mixed-models example, I am going to examine the three vegetation covers I recorded, hardwood, softwood, and mixed, at 19 acoustic locations and see if that fixed effect has an influence on foraging calls. A poisson distribution was used throughout my example due to calls being counts throughout the night.
</p>

<br><br>

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
#install.packages("flexplot")
library(ggplot2)
library(dplyr)
library(lme4)
library(ggplot2)
library(flexplot)
library(easystats)
library(arm)

#install.packages("remotes")
remotes::install_github("dustinfife/flexplot")

pkgbuild::has_build_tools(debug = TRUE)
```

<p style="color: darkolivegreen; font-family: serif; font-size: 20px;">
Let's read in our data set and look at vegetation cover as our fixed effect while looking at vegetation cover and site ID as our random effects.
</p>
```{r Random intercepts & random slopes, echo=TRUE, warning=FALSE, message=FALSE}

ad <- read.csv("acoustics.data.csv")

ad1 <- glmer(num_calls ~ veg_cover + (veg_cover | site_id), family=poisson(), data=ad)
summary(ad1)

flexplot::visualize(ad1, plot="model", sample=19) + 
  ggtitle("Random intercepts-random slopes") +
  xlab("Vegetation Cover") +
  ylab("Number of Calls")
```
<br><br>

<p style="color: darkolivegreen; font-family: serif; font-size: 20px;">
This summary concluded that the hardwood and softwood vegetation cover has significance in foraging calls (p < 0.05) . It's worth taking a look at the same fixed effect, vegetation cover, but only using site ID as a random effect.
</p>

<br><br>
```{r Random intercepts & same slopes, echo=TRUE, warning=FALSE, message=FALSE}

ad2 <- glmer(num_calls ~ veg_cover + (1|site_id), family=poisson(), data=ad)
summary(ad2)


flexplot::visualize(ad2, plot="model", sample=19) + 
  ggtitle("Random intercepts-same slopes") +
  xlab("Vegetation Cover") +
  ylab("Number of Calls")

```
<br><br>

<p style="color: darkolivegreen; font-family: serif; font-size: 20px;">
This summary concluded that the hardwood vegetation cover is the only vegetation cover that significantly effects foraging calls (p < 0.05). Now that we have compared both random slope and random intercepts with random slopes and same intercepts, lets complete a comparative analysis.
</p>

<br><br>
```{r Comparing performance, echo=TRUE, warning=FALSE, message=FALSE}

arm::display(ad1)
arm::display(ad2)

performance::compare_performance(ad1, ad2)

```
<br><br>

<p style="color: darkolivegreen; font-family: serif; font-size: 20px;">
From this comparison model, my second model (ad2) is better to use. As of now, my sample size is small, so this conclusion might change, but for now the only random effect that is worth noting would be site ID. Ad2 has a lower AIC than ad1 indicating that ad2 is a better fit model.
</p>











